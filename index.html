<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学习越南语请联系Wx:XiDeYueNanYu</title>
    <style>
        body {
            background-color: #f7fbf3;
            margin-bottom: 60px;
        }
        #infoBox { 
            width: 100%; 
                        max-width: 700px;
            height: 100px; 
            margin: 0 auto; 
            border: 1px solid #ccc; 
            background: #68838B; 
            color: #D2B48C; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: clamp(40px, 5vw, 60px);
            font-weight: bold;
        }
        #contactBox { 
            width: 100%; 
                        max-width: 700px;
            height: 45px; 
            margin: 0px auto; 
            border: 1px solid #ccc; 
            background: #68838B; 
            color: #D2B48C; 
            display: flex; 
            align-items: center; 
            justify-content: left; 
            padding-left: 20px;
            font-size: clamp(12px, 2vw, 15px); 
            font-weight: bold;
        }
        .content-box {
            max-width: 700px;
            margin: 20px auto;
            padding: 50px;
            border: 10px solid #957652;
            border-radius: 10px;
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            font-size: 30px;
            font-family: Arial;
            color: #222322;
            line-height: 3;
            text-align: justify;
        }
        .translated-word {
            position: relative;
            display: inline-block;
            white-space: nowrap;
            line-height: 1.3;
            background-color: #bfcdbf;
            color: #000000;
            padding: 4px 4px;
            border-radius: 2px;
        }
        .translation {
            position: absolute;
            top: -29px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 18px;
            background-color: #eddabc;
            color: #313a2d;
            padding: 4px 4px;
            border-radius: 1px;
            white-space: nowrap;
            z-index: 1;
            line-height: 1;
        }
        .original {
            display: inline;
            line-height: 1;
        }
        .floating-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            text-align: center;
            display: block;
            z-index: 1000;
        }
        #audioPlayer {
            width: 100%;
            margin-bottom: 10px;
        }
        .time-row {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        .time-box-group {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .button-group {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .floating-controls p#timeDisplay {
            font-size: 28px;
            color: #FFFFFF;
            background-color: #000000;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0;
        }
        .floating-controls .time-box {
            font-size: 16px;
            color: #FFFFFF;
            background-color: #555555;
            padding: 5px 10px;
            border-radius: 5px;
            min-width: 60px;
        }
        .tua-buttons {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .control-button {
            width: 50px;
            height: 50px;
            background-color: #363535;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            display: inline-flex;
            justify-content: center;
            align-items: center;
        }
        .control-button:disabled {
            background-color: #888888;
            cursor: not-allowed;
        }
        .control-button:hover:not(:disabled) {
            background-color: #000000;
        }
        .pause-play-button {
            background-color: #FF4500;
        }
        .pause-play-button:hover {
            background-color: #CC3700;
        }
        .toggle-button {
            background-color: #4682B4;
        }
        .toggle-button:hover {
            background-color: #36648B;
        }
        .loop-button {
            background-color: #3c923c;
        }
        .loop-button:hover {
            background-color: #347d34;
        }
        .clear-button {
            background-color: #bc3f13;
        }
        .clear-button:hover {
            background-color: #d15124;
        }
        .active {
            background-color: #ffffff; 
            border-radius: 5px;
        }
        @media (max-width: 400px) {
            .control-button {
                width: 40px;
                height: 40px;
                font-size: 14px;
            }
            .floating-controls p#timeDisplay {
                font-size: 20px;
            }
            .floating-controls .time-box {
                font-size: 12px;
                min-width: 50px;
            }
        }
        #quizContainer {
            display: none;
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            color: #53686f;
            font-size: 25px;
            font-weight: bold;
        }
        .question {
            margin-bottom: 20px;
            padding: 18px;
            color: #53686f;
            border: 5px solid #53686f;
            border-radius: 10px;
            background-color: #ffffff;
            font-size: 20px;
            font-weight: bold;
        }
        .options label {
            display: block;
            margin: 15px 0;
            cursor: pointer;
            color: #21292c;
            font-size: 16px;
            font-weight: bold;
        }
        #result {
            margin-top: 20px;
            padding: 10px;
            display: none;
            border: 5px solid #53686f;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            background-color: #ffffff;
            color: #007a33;
        }
        .wrong-answer {
            color: #f65936;
            margin: 10px 0;
            font-size: 16px;
            font-weight: bold;
        }
        #submitQuiz {
            font-family: Arial, sans-serif;
            padding: 10px 20px;
            border: 3px solid #53686f;
            background-color: #FF6820;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
        }
        #submitQuiz:hover {
            background-color: #ff844a;
        }
        .floating-mode-bar {
            position: fixed;
            bottom: 0px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #68838B;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0px 5px rgba(0, 0, 0, 1);
            display: flex;
            justify-content: center;
            gap: 20px;
            z-index: 1000;
            width: 900px;
        }
        .mode-button {
            padding: 10px 20px;
            border: 0px solid #ccc;
            background: #95a8ad;
            color: #293437;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            transition: border-color 0.3s;
        }
        .mode-button.active {
            border: 2px solid #ffffff;
            background: #f0f0f0;
            color: #293437;
        }




                
                /*-------------------------Thiet Lap Cho Di Dong-----------------------------------*/
        @media (max-width: 768px) { 
            body {
            background-color: #f7fbf3;
            margin-bottom: 60px;
        }
        #infoBox { 
            width: 90%; 
            height: 120px; 
            margin: 0 auto; 
            border: 1px solid #ccc; 
            background: #68838B; 
            color: #D2B48C; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 60px; 
            font-weight: bold;
        }
        #contactBox { 
            width: 90%; 
            height: 50px; 
            margin: 0px auto; 
            border: 1px solid #ccc; 
            background: #68838B; 
            color: #D2B48C; 
            display: flex; 
            align-items: center; 
            justify-content: left; 
            padding-left: 20px;
            font-size: 20px; 
            font-weight: bold;
        }
        .content-box {
            max-width: 700px;
            margin: 10px auto;
            padding: 20px;
                        padding-top: 50px;
                        padding-bottom: 90px;
            border: 10px solid #957652;
            border-radius: 10px;
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            font-size: 19px;
            font-family: Arial;
            color: #222322;
            line-height: 3.5;
            text-align: justify;
        }
        .translated-word {
            position: relative;
            display: inline-block;
            white-space: nowrap;
            line-height: 1.3;
            background-color: #bfcdbf;
            color: #000000;
            padding: 3px 3px;
            border-radius: 2px;
        }
        .translation {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 13px;
            background-color: #eddabc;
            color: #313a2d;
            padding: 4px 4px;
            border-radius: 1px;
            white-space: nowrap;
            z-index: 1;
            line-height: 1;
        }
        .original {
            display: inline;
            line-height: 1;
        }
        .floating-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            text-align: center;
            display: block;
            z-index: 1000;
        }
        #audioPlayer {
            width: 100%;
            margin-bottom: 10px;
        }
        .time-row {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        .time-box-group {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .button-group {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .floating-controls p#timeDisplay {
            font-size: 28px;
            color: #FFFFFF;
            background-color: #000000;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0;
        }
        .floating-controls .time-box {
            font-size: 16px;
            color: #FFFFFF;
            background-color: #555555;
            padding: 5px 10px;
            border-radius: 5px;
            min-width: 60px;
        }
        .tua-buttons {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .control-button {
            width: 50px;
            height: 50px;
            background-color: #363535;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            display: inline-flex;
            justify-content: center;
            align-items: center;
        }
        .control-button:disabled {
            background-color: #888888;
            cursor: not-allowed;
        }
        .control-button:hover:not(:disabled) {
            background-color: #000000;
        }
        .pause-play-button {
            background-color: #FF4500;
        }
        .pause-play-button:hover {
            background-color: #CC3700;
        }
        .toggle-button {
            background-color: #4682B4;
        }
        .toggle-button:hover {
            background-color: #36648B;
        }
        .loop-button {
            background-color: #3c923c;
        }
        .loop-button:hover {
            background-color: #347d34;
        }
        .clear-button {
            background-color: #bc3f13;
        }
        .clear-button:hover {
            background-color: #d15124;
        }
        .active {
            background-color: #ffffff; 
            border-radius: 5px;
        }
        @media (max-width: 400px) {
            .control-button {
                width: 40px;
                height: 40px;
                font-size: 14px;
            }
            .floating-controls p#timeDisplay {
                font-size: 20px;
            }
            .floating-controls .time-box {
                font-size: 12px;
                min-width: 50px;
            }
        }
        #quizContainer {
            display: none;
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            color: #53686f;
            font-size: 25px;
            font-weight: bold;
        }
        .question {
            margin-bottom: 20px;
            padding: 18px;
            color: #53686f;
            border: 5px solid #53686f;
            border-radius: 10px;
            background-color: #ffffff;
            font-size: 16px;
            font-weight: bold;
        }
        .options label {
            display: block;
            margin: 15px 0;
            cursor: pointer;
            color: #21292c;
            font-size: 16px;
            font-weight: bold;
        }
        #result {
            margin-top: 20px;
            padding: 10px;
            display: none;
            border: 5px solid #53686f;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            background-color: #ffffff;
            color: #007a33;
        }
        .wrong-answer {
            color: #f65936;
            margin: 10px 0;
            font-size: 16px;
            font-weight: bold;
        }
        #submitQuiz {
            font-family: Arial, sans-serif;
            padding: 10px 20px;
            border: 3px solid #53686f;
            background-color: #FF6820;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
        }
        #submitQuiz:hover {
            background-color: #ff844a;
        }
        .floating-mode-bar {
            position: fixed;
            bottom: 0px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #68838B;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0px 5px rgba(0, 0, 0, 1);
            display: flex;
            justify-content: center;
            gap: 20px;
            z-index: 1000;
            width: 100%;
        }
        .mode-button {
            padding: 10px 20px;
            border: 0px solid #ccc;
            background: #95a8ad;
            color: #293437;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            transition: border-color 0.3s;
        }
        .mode-button.active {
            border: 2px solid #ffffff;
            background: #f0f0f0;
            color: #293437;
        }
}
    </style>
</head>
<body>
    <div id="infoBox">习得越南语</div>
    <div id="contactBox">讲师-阮玉煌 | Weixin：XiDeYueNanYu</div>
    <div id="contentContainer">
        <div class="content-box" id="content"></div>
    </div>
    <div id="quizContainer">
        <h1>回答下面问题</h1>
        <form id="quizForm">
            <div id="questions"></div>
            <button type="button" id="submitQuiz" onclick="checkAnswers()">提交</button>
        </form>
        <div id="result"></div>
    </div>
    <div class="floating-controls" id="floatingControls">
        <audio id="audioPlayer" src="lesson.mp3" controls></audio>
        <div class="time-row">
            <p id="timeDisplay">00:00</p>
            <div class="time-box-group">
                <span class="time-box" id="loopStart">--:--</span>
                <span class="time-box" id="loopEnd">--:--</span>
            </div>
            <div class="button-group">
                <button class="control-button loop-button" id="loopButton">听</button>
                <button class="control-button clear-button" id="clearButton">删</button>
            </div>
        </div>
        <div class="tua-buttons">
            <button class="control-button" id="rewind5sButton">-5s</button>
            <button class="control-button" id="rewind1sButton">-1s</button>
            <button class="control-button" id="forward1sButton">+1s</button>
            <button class="control-button" id="forward5sButton">+5s</button>
        </div>
        <div class="action-buttons">
            <button class="control-button pause-play-button" id="pausePlayButton">播</button>
            <button class="control-button toggle-button" id="toggleControlsButton">藏</button>
        </div>
    </div>
    <div class="floating-mode-bar">
        <button class="mode-button active" id="contentMode">内容</button>
        <button class="mode-button" id="quizMode">回答问题</button>
    </div>

    <script>

const textContentData = [
    `Chàng trai Pháp và rổ đu đủ “tùy tâm” ở Đồng Tháp.
   Giữa những cánh đồng xanh mướt của miền Tây Việt Nam, nơi nhịp sống giản dị hòa quyện với tình người nồng ấm, câu chuyện về anh Jason, một chàng trai 31 tuổi đến từ Pháp, đã lan tỏa tinh thần tử tế qua hành động bán đu đủ “lấy tùy ý, trả tùy tâm” tại Đồng Tháp. Hình ảnh anh ngồi bên rổ đu đủ trước ngôi nhà của gia đình vợ, kèm tấm bảng viết tay đầy ý nghĩa, không chỉ khiến cộng đồng địa phương xúc động mà còn thu hút sự chú ý của cư dân mạng, những người đã dành “mưa tim” cho sự chân thành và sáng tạo của anh.
    Jason, người đã chọn Việt Nam làm quê hương thứ hai sau khi kết hôn với chị Vy Võ, một cô gái miền Tây 30 tuổi, đã mang đến một góc nhìn mới về sự hòa nhập văn hóa. Trong một lần về thăm gia đình vợ tại Đồng Tháp, anh nhận thấy vườn đu đủ của bố mẹ vợ có nhiều quả chín nhưng không được thu hoạch do vẻ ngoài kém hoàn hảo. Thay vì để lãng phí, anh quyết định hái những quả đu đủ chín, đặt vào một chiếc rổ lớn trước nhà, kèm theo tấm bảng “lấy tùy ý, trả tùy tâm”. Ý tưởng này, dù giản dị, không chỉ thể hiện tinh thần sẻ chia mà còn phản ánh sự thấu hiểu của anh đối với văn hóa miền Tây, nơi lòng tốt luôn được trân trọng và lan tỏa.
    Hành động của Jason nhanh chóng trở thành tâm điểm của sự chú ý. Người đi đường, từ những người bán vé số, lao động phổ thông đến trẻ em trong xóm, đều ghé lại lấy đu đủ, một số người để lại tiền trong chiếc hũ nhựa đặt trên ghế, nhưng nhiều người chỉ đơn giản nhận món quà với lòng biết ơn. “Tôi không mong đợi mọi người trả tiền, chỉ hy vọng mang lại niềm vui nhỏ bé cho họ,” Jason chia sẻ. Chị Vy Võ, người chứng kiến ý tưởng độc đáo của chồng, không khỏi xúc động trước sự chân thành của anh, đồng thời hài hước ví anh như “người miền Tây gốc Pháp” vì khả năng hòa nhập đáng kinh ngạc.
    Câu chuyện về rổ đu đủ không chỉ dừng lại ở hành động cho đi mà còn khơi dậy tinh thần đoàn kết trong cộng đồng. Nhiều người dân địa phương, cảm nhận được ý nghĩa của việc làm này, đã góp thêm đu đủ, xôi, hoặc các món ăn khác vào rổ, đặc biệt vào những dịp rằm và mùng một âm lịch. Một cụ bà bán vé số, thường xuyên ghé lấy một quả đu đủ, tâm sự: “Nhờ những quả đu đủ này, tôi có thêm bữa sáng mà không phải lo lắng về tiền bạc. Những điều tử tế như vậy khiến tôi cảm thấy cuộc sống vẫn luôn đầy ắp hy vọng.”
    Hành trình của Jason tại Việt Nam còn là một câu chuyện tình yêu vượt biên giới. Từ lần gặp gỡ tình cờ tại một quán bar ở Thành phố Hồ Chí Minh năm 2018, anh và chị Vy Võ đã xây dựng một mối quan hệ bền vững dựa trên sự thấu hiểu và tôn trọng lẫn nhau. Sau khi quyết định sống lâu dài tại Việt Nam, Jason từ bỏ công việc kỹ sư ở Pháp để trở thành giáo viên dạy tiếng Anh và tiếng Pháp, đồng thời học hỏi văn hóa Việt Nam qua những chuyến về quê cùng vợ. “Mỗi lần về Đồng Tháp, tôi cảm nhận được sự ấm áp của gia đình và cộng đồng, điều mà tôi chưa từng trải nghiệm ở bất kỳ nơi đâu,” anh chia sẻ.
    Rổ đu đủ “tùy tâm” không chỉ là một sáng kiến nhỏ mà còn là biểu tượng của sự gắn kết giữa các nền văn hóa, giữa lòng nhân ái và sự sẻ chia. Hành động của Jason, dù giản đơn, đã truyền cảm hứng cho cộng đồng, nhắc nhở rằng những giá trị nhân văn luôn có thể nảy mầm từ những điều bình dị nhất. Với anh và chị Vy Võ, những khoảnh khắc như thế không chỉ là kỷ niệm mà còn là minh chứng cho một cuộc sống tràn đầy ý nghĩa, nơi tình yêu và lòng tốt hòa quyện, tạo nên những câu chuyện đẹp đẽ giữa lòng miền Tây.`
];
const dictionary = {
    "chàng trai": "男孩",
    "Pháp": "法国",
    "rổ": "篮子",
    "đu đủ": "木瓜",
    "tùy tâm": "随心",
    "Đồng Tháp": "同塔",
    "cánh đồng": "田野",
    "xanh mướt": "翠绿",
    "miền Tây": "西部",
    "nhịp sống": "生活节奏",
    "giản dị": "朴素",
    "hòa quyện": "融合",
    "tình người": "人情",
    "nồng ấm": "温暖",
    "câu chuyện": "故事",
    "lan tỏa": "传播",
    "tinh thần": "精神",
    "tử tế": "善良",
    "hành động": "行动",
    "bán": "卖",
    "lấy": "拿",
    "trả": "付",
    "tùy ý": "随意",
    "hình ảnh": "形象",
    "ngôi nhà": "房子",
    "gia đình": "家庭",
    "vợ": "妻子",
    "tấm bảng": "牌子",
    "viết tay": "手写",
    "đầy ý nghĩa": "充满意义",
    "cộng đồng": "社区",
    "địa phương": "地方",
    "xúc động": "感动",
    "thu hút": "吸引",
    "sự chú ý": "关注",
    "cư dân mạng": "网友",
    "mưa tim": "点赞",
    "chân thành": "真诚",
    "sáng tạo": "创意",
    "quê hương": "家乡",
    "kết hôn": "结婚",
    "góc nhìn": "视角",
    "mới": "新",
    "hòa nhập": "融入",
    "văn hóa": "文化",
    "thăm": "探望",
    "vườn": "园子",
    "bố mẹ": "父母",
    "quả": "果实",
    "chín": "成熟",
    "thu hoạch": "收获",
    "vẻ ngoài": "外观",
    "hoàn hảo": "完美",
    "lãng phí": "浪费",
    "hái": "摘",
    "chiếc": "个",
    "lớn": "大",
    "ý tưởng": "想法",
    "thể hiện": "表现",
    "sẻ chia": "分享",
    "phản ánh": "反映",
    "thấu hiểu": "理解",
    "trân trọng": "珍惜",
    "tâm điểm": "焦点",
    "người đi đường": "路人",
    "lao động phổ thông": "普通劳动者",
    "trẻ em": "孩子",
    "xóm": "村子",
    "ghé lại": "停留",
    "chiếc hũ": "罐子",
    "nhựa": "塑料",
    "ghế": "椅子",
    "đơn giản": "简单",
    "nhận": "接受",
    "món quà": "礼物",
    "biết ơn": "感恩",
    "mong đợi": "期待",
    "hy vọng": "希望",
    "niềm vui": "快乐",
    "nhỏ bé": "微小",
    "chứng kiến": "见证",
    "độc đáo": "独特",
    "chồng": "丈夫",
    "hài hước": "幽默",
    "ví": "比喻",
    "khả năng": "能力",
    "đáng kinh ngạc": "令人惊讶",
    "cho đi": "给予",
    "khơi dậy": "激发",
    "đoàn kết": "团结",
    "cảm nhận": "感受",
    "ý nghĩa": "意义",
    "góp": "贡献",
    "xôi": "糯米饭",
    "món ăn": "菜肴",
    "dịp": "场合",
    "rằm": "十五",
    "âm lịch": "农历",
    "cụ bà": "老奶奶",
    "tâm sự": "倾诉",
    "bữa sáng": "早餐",
    "lo lắng": "担心",
    "tiền bạc": "金钱",
    "điều": "事情",
    "cuộc sống": "生活",
    "đầy ắp": "充满",
    "hy vọng": "希望",
    "hành trình": "旅程",
    "tình yêu": "爱情",
    "vượt biên giới": "跨国",
    "gặp gỡ": "相遇",
    "tình cờ": "偶然",
    "quán bar": "酒吧",
    "xây dựng": "建立",
    "mối quan hệ": "关系",
    "bền vững": "持久",
    "tôn trọng": "尊重",
    "lẫn nhau": "彼此",
    "quyết định": "决定",
    "sống": "生活",
    "lâu dài": "长期",
    "từ bỏ": "放弃",
    "công việc": "工作",
    "kỹ sư": "工程师",
    "giáo viên": "老师",
    "dạy": "教",
    "tiếng Anh": "英语",
    "tiếng Pháp": "法语",
    "học hỏi": "学习",
    "chuyến": "次",
    "quê": "家乡",
    "cảm nhận": "感受",
    "ấm áp": "温暖",
    "trải nghiệm": "体验",
    "bất kỳ": "任何",
    "nơi đâu": "哪里",
    "sáng kiến": "创意",
    "biểu tượng": "象征",
    "gắn kết": "连接",
    "nền": "背景",
    "giản đơn": "简单",
    "truyền cảm hứng": "启发",
    "nhắc nhở": "提醒",
    "giá trị": "价值",
    "nhân văn": "人文",
    "nảy mầm": "萌芽",
    "bình dị": "平凡",
    "khoảnh khắc": "瞬间",
    "kỷ niệm": "回忆",
    "minh chứng": "证明",
    "tràn đầy": "充满",
    "hòa quyện": "融合",
    "tạo nên": "创造",
    "đẹp đẽ": "美丽"
};
const quizData = [
    {
        question: "Tại sao hành động đặt rổ đu đủ “tùy tâm” của Jason được xem là sáng tạo và ý nghĩa?",
        options: ["Vì giúp bán hết số đu đủ không thể bán ngoài chợ", "Vì thu hút được nhiều lượt chia sẻ trên mạng xã hội", "Vì kết hợp được sự giản dị với tinh thần sẻ chia và thấu hiểu văn hóa địa phương", "Vì tạo điều kiện để người dân trao đổi hàng hóa không cần tiền"],
        correct: "Vì kết hợp được sự giản dị với tinh thần sẻ chia và thấu hiểu văn hóa địa phương"
    },
    {
        question: "Điểm khác biệt nổi bật trong hành động của Jason so với những hình thức từ thiện thông thường là gì?",
        options: ["Không giới hạn số lượng người nhận", "Cho phép người nhận tự quyết định cách đền đáp", "Áp dụng hình thức thanh toán điện tử", "Được truyền hình địa phương đưa tin"],
        correct: "Cho phép người nhận tự quyết định cách đền đáp"
    },
    {
        question: "Phản ứng của cộng đồng địa phương đối với hành động của Jason có thể được mô tả như thế nào?",
        options: ["Hoài nghi và dè dặt", "Thờ ơ nhưng tôn trọng", "Hào hứng, đồng cảm và tham gia chung", "Ngưỡng mộ nhưng không ủng hộ thực tế"],
        correct: "Hào hứng, đồng cảm và tham gia chung"
    },
    {
        question: "Chi tiết nào trong bài cho thấy hành động của Jason gây ảnh hưởng tích cực đến người khác?",
        options: ["Người dân chia sẻ bài viết của anh lên mạng xã hội", "Cụ bà bán vé số có thêm bữa sáng nhờ quả đu đủ", "Các cửa hàng cạnh nhà anh bắt đầu bán đu đủ", "Mọi người trả tiền đầy đủ cho mỗi quả đu đủ"],
        correct: "Cụ bà bán vé số có thêm bữa sáng nhờ quả đu đủ"
    },
    {
        question: "Mục đích chính của việc nhấn mạnh rằng đu đủ có vẻ ngoài “kém hoàn hảo” là gì?",
        options: ["Chứng minh Jason không am hiểu nông sản", "Cho thấy ý nghĩa của việc tận dụng thay vì lãng phí", "Phê phán thói quen chọn hàng hóa đẹp mắt", "Thể hiện sự thiếu kinh nghiệm làm vườn của gia đình vợ"],
        correct: "Cho thấy ý nghĩa của việc tận dụng thay vì lãng phí"
    },
    {
        question: "Theo bài viết, Jason chọn sống lâu dài tại Việt Nam vì lý do nào?",
        options: ["Anh muốn xây dựng sự nghiệp trong ngành giáo dục", "Anh cảm thấy gắn bó với gia đình và cộng đồng địa phương", "Anh không còn cơ hội làm việc ở Pháp", "Vợ anh không thể rời Việt Nam vì công việc"],
        correct: "Anh cảm thấy gắn bó với gia đình và cộng đồng địa phương"
    },
    {
        question: "Chi tiết nào dưới đây thể hiện rõ nhất sự hòa nhập văn hóa của Jason?",
        options: ["Jason mặc áo bà ba khi ra đường", "Jason học nói tiếng Việt trong 3 tháng", "Jason được vợ ví như “người miền Tây gốc Pháp”", "Jason xây dựng lại căn nhà của bố mẹ vợ"],
        correct: "Jason được vợ ví như “người miền Tây gốc Pháp”"
    },
    {
        question: "Câu nào sau đây KHÔNG đúng với nội dung bài đọc?",
        options: ["Jason từng là kỹ sư trước khi trở thành giáo viên", "Hành động của Jason tạo ra làn sóng chia sẻ tích cực", "Người dân địa phương không ủng hộ ý tưởng “tùy tâm”", "Câu chuyện tình yêu của Jason và Vy Võ bắt đầu từ năm 2018"],
        correct: "Người dân địa phương không ủng hộ ý tưởng “tùy tâm”"
    },
    {
        question: "Từ “biểu tượng” trong câu “rổ đu đủ ‘tùy tâm’… là biểu tượng của sự gắn kết giữa các nền văn hóa” mang hàm ý gì?",
        options: ["Đó là cách bán hàng mới tại miền Tây", "Đó là mô hình từ thiện nên nhân rộng ra cả nước", "Đó là hành động nhỏ mang ý nghĩa kết nối sâu xa", "Đó là phương tiện để người nước ngoài kiếm sống"],
        correct: "Đó là hành động nhỏ mang ý nghĩa kết nối sâu xa"
    },
    {
        question: "Tác giả có thái độ gì khi kể về hành động của Jason?",
        options: ["Mỉa mai vì hành động không hiệu quả", "Ngạc nhiên và cảm phục", "Chê trách vì gây phiền phức cho người dân", "Trung lập, không tán thành cũng không phản đối"],
        correct: "Ngạc nhiên và cảm phục"
    },
    {
        question: "Câu chuyện về cụ bà bán vé số được dùng để:",
        options: ["Cho thấy những người lớn tuổi thường sống đơn giản", "Minh họa tác động thực tế của rổ đu đủ lên người nhận", "Thể hiện sự cạnh tranh giữa người bán hàng rong và người cho đi", "Giải thích lý do vì sao Jason chọn bán đu đủ"],
        correct: "Minh họa tác động thực tế của rổ đu đủ lên người nhận"
    },
    {
        question: "Thông điệp tổng thể của bài đọc là gì?",
        options: ["Người nước ngoài có thể học được cách làm từ thiện của người Việt", "Mỗi cá nhân đều có thể tạo ra thay đổi tích cực qua hành động nhỏ", "Văn hóa phương Tây đang được chấp nhận tại Việt Nam", "Nông sản miền Tây cần được quảng bá ra quốc tế"],
        correct: "Mỗi cá nhân đều có thể tạo ra thay đổi tích cực qua hành động nhỏ"
    }
];
                
        // Xử lý hiển thị văn bản với từ điển
        const content = document.getElementById('content');
        function renderText() {
            let html = textContentData[0].replace(/\n/g, "<br>");
            const sortedKeys = Object.keys(dictionary).sort((a, b) => b.length - a.length);
            sortedKeys.forEach(key => {
                const regex = new RegExp(`(^|\\s|[.,])(${key})(\\s|[.,]|$)`, 'g');
                html = html.replace(regex, `$1<span class="translated-word"><span class="translation">${dictionary[key]}</span><span class="original">$2</span></span>$3`);
            });
            content.innerHTML = html;
        }

        // Gọi hàm renderText khi khởi tạo
        renderText();

        // Xử lý audio và bảng điều khiển
        const audioPlayer = document.getElementById("audioPlayer");
        const floatingControls = document.getElementById("floatingControls");
        const timeDisplay = floatingControls.querySelector("#timeDisplay");
        const loopStart = floatingControls.querySelector("#loopStart");
        const loopEnd = floatingControls.querySelector("#loopEnd");
        const loopButton = floatingControls.querySelector("#loopButton");
        const clearButton = floatingControls.querySelector("#clearButton");
        const rewind5sButton = floatingControls.querySelector("#rewind5sButton");
        const rewind1sButton = floatingControls.querySelector("#rewind1sButton");
        const forward1sButton = floatingControls.querySelector("#forward1sButton");
        const forward5sButton = floatingControls.querySelector("#forward5sButton");
        const pausePlayButton = floatingControls.querySelector("#pausePlayButton");
        const toggleControlsButton = floatingControls.querySelector("#toggleControlsButton");
        const tuaButtons = floatingControls.querySelector(".tua-buttons");

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function updateTimeDisplay(displayElement) {
            displayElement.textContent = formatTime(audioPlayer.currentTime);
        }

        let customLoopStart = null;
        let customLoopEnd = null;
        let clickCount = 0;
        let isLooping = false;

        const updateInterval = setInterval(() => updateTimeDisplay(timeDisplay), 1000);

        audioPlayer.ontimeupdate = function() {
            updateTimeDisplay(timeDisplay);
            if (isLooping && customLoopStart !== null && customLoopEnd !== null) {
                if (audioPlayer.currentTime >= customLoopEnd) {
                    audioPlayer.currentTime = customLoopStart;
                }
            }
        };

        timeDisplay.onclick = () => {
            if (audioPlayer.paused) {
                clickCount++;
                if (clickCount === 1) {
                    customLoopStart = audioPlayer.currentTime;
                    loopStart.textContent = formatTime(customLoopStart);
                } else if (clickCount === 2) {
                    customLoopEnd = audioPlayer.currentTime;
                    if (customLoopEnd <= customLoopStart) {
                        customLoopEnd = null;
                        loopEnd.textContent = "--:--";
                    } else {
                        loopEnd.textContent = formatTime(customLoopEnd);
                    }
                    clickCount = 0;
                }
            }
        };

        rewind5sButton.onclick = () => {
            if (!isLooping) {
                audioPlayer.currentTime = Math.max(0, audioPlayer.currentTime - 5);
                updateTimeDisplay(timeDisplay);
            }
        };
        rewind1sButton.onclick = () => {
            if (!isLooping) {
                audioPlayer.currentTime = Math.max(0, audioPlayer.currentTime - 1);
                updateTimeDisplay(timeDisplay);
            }
        };
        forward1sButton.onclick = () => {
            if (!isLooping) {
                audioPlayer.currentTime = Math.min(audioPlayer.duration, audioPlayer.currentTime + 1);
                updateTimeDisplay(timeDisplay);
            }
        };
        forward5sButton.onclick = () => {
            if (!isLooping) {
                audioPlayer.currentTime = Math.min(audioPlayer.duration, audioPlayer.currentTime + 5);
                updateTimeDisplay(timeDisplay);
            }
        };

        pausePlayButton.onclick = () => {
            if (audioPlayer.paused) {
                audioPlayer.play();
                pausePlayButton.textContent = "停";
            } else {
                audioPlayer.pause();
                pausePlayButton.textContent = "播";
            }
        };

        loopButton.onclick = () => {
            if (customLoopStart !== null && customLoopEnd !== null) {
                audioPlayer.currentTime = customLoopStart;
                audioPlayer.play();
                isLooping = true;
                rewind5sButton.disabled = true;
                rewind1sButton.disabled = true;
                forward1sButton.disabled = true;
                forward5sButton.disabled = true;
            }
        };

        clearButton.onclick = () => {
            customLoopStart = null;
            customLoopEnd = null;
            loopStart.textContent = "--:--";
            loopEnd.textContent = "--:--";
            clickCount = 0;
            isLooping = false;
            rewind5sButton.disabled = false;
            rewind1sButton.disabled = false;
            forward1sButton.disabled = false;
            forward5sButton.disabled = false;
        };

        let controlsVisible = true;
        toggleControlsButton.onclick = () => {
            if (controlsVisible) {
                timeDisplay.style.display = "none";
                tuaButtons.style.display = "none";
                pausePlayButton.style.display = "none";
                loopStart.style.display = "none";
                loopEnd.style.display = "none";
                loopButton.style.display = "none";
                clearButton.style.display = "none";
                toggleControlsButton.textContent = "示";
                controlsVisible = false;
            } else {
                timeDisplay.style.display = "inline-block";
                tuaButtons.style.display = "flex";
                pausePlayButton.style.display = "inline-flex";
                loopStart.style.display = "inline-block";
                loopEnd.style.display = "inline-block";
                loopButton.style.display = "inline-flex";
                clearButton.style.display = "inline-flex";
                toggleControlsButton.textContent = "藏";
                controlsVisible = true;
            }
        };

        audioPlayer.onpause = audioPlayer.onended = function() {
            pausePlayButton.textContent = "播";
        };


        // Biến lưu trữ vị trí cuộn và lựa chọn
        let contentScrollPosition = 0;
        let quizScrollPosition = 0;
        let userSelections = {};
        let isSubmitted = false;

        // Hiển thị câu hỏi và khôi phục lựa chọn
        function loadQuiz() {
            const questionsDiv = document.getElementById('questions');
            questionsDiv.innerHTML = '';
            quizData.forEach((item, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                
                const questionTitle = document.createElement('h3');
                questionTitle.textContent = `Câu ${index + 1}: ${item.question}`;
                questionDiv.appendChild(questionTitle);

                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'options';
                
                item.options.forEach(option => {
                    const label = document.createElement('label');
                    const isChecked = userSelections[`question${index}`] === option ? 'checked' : '';
                    label.innerHTML = `
                        <input type="radio" name="question${index}" value="${option}" ${isChecked}>
                        ${option}
                    `;
                    optionsDiv.appendChild(label);
                });

                questionDiv.appendChild(optionsDiv);
                questionsDiv.appendChild(questionDiv);
            });

            // Khôi phục vị trí cuộn
            window.scrollTo(0, quizScrollPosition);
        }

        // Lưu lựa chọn của người dùng
        function saveSelections() {
            quizData.forEach((_, index) => {
                const selected = document.querySelector(`input[name="question${index}"]:checked`);
                if (selected) {
                    userSelections[`question${index}`] = selected.value;
                }
            });
        }

        // Kiểm tra đáp án
        function checkAnswers() {
            let score = 0;
            const total = quizData.length;
            let wrongAnswers = [];
            
            quizData.forEach((item, index) => {
                const selected = document.querySelector(`input[name="question${index}"]:checked`);
                if (selected) {
                    if (selected.value === item.correct) {
                        score++;
                    } else {
                        wrongAnswers.push({
                            question: item.question,
                            selected: selected.value,
                            correct: item.correct
                        });
                    }
                } else {
                    wrongAnswers.push({
                        question: item.question,
                        selected: "未选择",
                        correct: item.correct
                    });
                }
            });

            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
                <h3>YD3-结果: ${score}/${total} 答案正确</h3>
                <p>比例: ${(score/total * 100).toFixed(2)}%</p>
            `;

            if (wrongAnswers.length > 0) {
                resultDiv.innerHTML += '<h4>错误答案:</h4>';
                wrongAnswers.forEach((wrong, index) => {
                    resultDiv.innerHTML += `
                        <div class="wrong-answer">
                            Câu ${quizData.findIndex(q => q.question === wrong.question) + 1}: ${wrong.question}<br>
                            你的选择: ${wrong.selected} - 正确答案: ${wrong.correct}
                        </div>
                    `;
                });
            } else {
                resultDiv.innerHTML += '<p>回答正确所有问题</p>';
            }

            resultDiv.scrollIntoView({ behavior: 'smooth' });
            isSubmitted = true; // Đánh dấu đã nộp bài
        }

        // Xử lý chế độ hiển thị
        const contentModeButton = document.getElementById('contentMode');
        const quizModeButton = document.getElementById('quizMode');
        const contentContainer = document.getElementById('contentContainer');
        const quizContainer = document.getElementById('quizContainer');

        contentModeButton.addEventListener('click', () => {
            // Lưu vị trí cuộn của quiz trước khi chuyển
            quizScrollPosition = window.scrollY;
            saveSelections(); // Lưu lựa chọn của người dùng
            
            contentContainer.style.display = 'block';
            quizContainer.style.display = 'none';
            contentModeButton.classList.add('active');
            quizModeButton.classList.remove('active');
            floatingControls.style.display = 'block';
            renderText();
            
            // Khôi phục vị trí cuộn của content
            window.scrollTo(0, contentScrollPosition);
        });

        quizModeButton.addEventListener('click', () => {
            // Lưu vị trí cuộn của content trước khi chuyển
            contentScrollPosition = window.scrollY;
            saveSelections(); // Lưu lựa chọn của người dùng
            
            contentContainer.style.display = 'none';
            quizContainer.style.display = 'block';
            quizModeButton.classList.add('active');
            contentModeButton.classList.remove('active');
            floatingControls.style.display = 'none';
            
            // Reset lựa chọn nếu đã nộp bài
            if (isSubmitted) {
                userSelections = {};
                isSubmitted = false;
            }
            
            loadQuiz();
        });

        // Mặc định hiển thị nội dung
        contentContainer.style.display = 'block';
        quizContainer.style.display = 'none';
    </script>
</body>
</html>